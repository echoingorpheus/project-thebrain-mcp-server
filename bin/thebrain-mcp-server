#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/thebrain_mcp_server'

# Configuration is now automatically loaded from environment
# via the updated module initialization

# Validate required configuration
unless ThebrainMcpServer.config.thebrain_api_key
  puts 'Error: THEBRAIN_API_KEY environment variable is required'
  exit 1
end

unless ThebrainMcpServer.config.thebrain_brain_id
  puts 'Error: THEBRAIN_BRAIN_ID environment variable is required'
  exit 1
end

# Start the server
begin
  server = ThebrainMcpServer::Server.new
  puts 'Starting TheBrain MCP Server...'
  puts "API URL: #{ThebrainMcpServer.config.thebrain_api_url}"
  puts "Brain ID: #{ThebrainMcpServer.config.thebrain_brain_id}"
  puts "Log Level: #{ThebrainMcpServer.config.log_level}"

  server.start
rescue Interrupt
  puts "\nShutting down gracefully..."
  exit 0
rescue StandardError => e
  puts "Fatal error: #{e.message}"
  exit 1
end
